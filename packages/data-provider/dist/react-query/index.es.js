import{useQuery as e,useQueryClient as t,useMutation as n}from"@tanstack/react-query";import{z as o}from"zod";import a from"axios";var i,r,s,l,c,u,p,d=function(){return d=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},d.apply(this,arguments)};function m(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n}function g(e,t,n,o){return new(n||(n=Promise))((function(a,i){function r(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}l((o=o.apply(e,t||[])).next())}))}function f(e,t){var n,o,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},r=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return r.next=s(0),r.throw=s(1),r.return=s(2),"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(i=0)),i;)try{if(n=1,o&&(a=2&s[0]?o.return:s[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,s[1])).done)return a;switch(o=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],o=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function _(e,t,n){if(n||2===arguments.length)for(var o,a=0,i=t.length;a<i;a++)!o&&a in t||(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError,function(e){e.execute_code="execute_code",e.code_interpreter="code_interpreter",e.file_search="file_search",e.web_search="web_search",e.retrieval="retrieval",e.function="function",e.memory="memory",e.ui_resources="ui_resources"}(i||(i={})),function(e){e.code_interpreter="code_interpreter",e.execute_code="execute_code",e.file_search="file_search",e.image_edit="image_edit",e.context="context",e.ocr="ocr"}(r||(r={})),function(e){e.FILE_CITATION="file_citation",e.FILE_PATH="file_path"}(s||(s={})),function(e){e.IN_PROGRESS="in_progress",e.CANCELLED="cancelled",e.FAILED="failed",e.COMPLETED="completed",e.EXPIRED="expired"}(l||(l={})),function(e){e.TEXT="text",e.IMAGE_FILE="image_file"}(c||(c={})),function(e){e.QUEUED="queued",e.IN_PROGRESS="in_progress",e.REQUIRES_ACTION="requires_action",e.CANCELLING="cancelling",e.CANCELLED="cancelled",e.FAILED="failed",e.COMPLETED="completed",e.EXPIRED="expired"}(u||(u={})),function(e){e.Vision="vision",e.FineTune="fine-tune",e.FineTuneResults="fine-tune-results",e.Assistants="assistants",e.AssistantsOutput="assistants_output"}(p||(p={}));var b,v={order:"desc",limit:100};!function(e){e.ThreadCreated="thread.created",e.ThreadRunCreated="thread.run.created",e.ThreadRunQueued="thread.run.queued",e.ThreadRunInProgress="thread.run.in_progress",e.ThreadRunRequiresAction="thread.run.requires_action",e.ThreadRunCompleted="thread.run.completed",e.ThreadRunFailed="thread.run.failed",e.ThreadRunCancelling="thread.run.cancelling",e.ThreadRunCancelled="thread.run.cancelled",e.ThreadRunExpired="thread.run.expired",e.ThreadRunStepCreated="thread.run.step.created",e.ThreadRunStepInProgress="thread.run.step.in_progress",e.ThreadRunStepCompleted="thread.run.step.completed",e.ThreadRunStepFailed="thread.run.step.failed",e.ThreadRunStepCancelled="thread.run.step.cancelled",e.ThreadRunStepExpired="thread.run.step.expired",e.ThreadRunStepDelta="thread.run.step.delta",e.ThreadMessageCreated="thread.message.created",e.ThreadMessageInProgress="thread.message.in_progress",e.ThreadMessageCompleted="thread.message.completed",e.ThreadMessageIncomplete="thread.message.incomplete",e.ThreadMessageDelta="thread.message.delta",e.ErrorEvent="error"}(b||(b={}));var h,E,T,A,O=o.enum(["not_matched","inaccurate","bad_style","missing_image","unjustified_refusal","not_helpful","other","accurate_reliable","creative_solution","clear_well_written","attention_to_detail"]),I=o.enum(["thumbsUp","thumbsDown"]),y=o.object({rating:I,tag:O,text:o.string().max(1024).optional()});o.string().uuid(),function(e){e.OVERRIDE_AUTH="override_auth",e.USER_PROVIDED="user_provided",e.SYSTEM_DEFINED="system_defined"}(A||(A={}));var S,R,x,L=o.nativeEnum(A);!function(e){e.azureOpenAI="azureOpenAI",e.openAI="openAI",e.google="google",e.anthropic="anthropic",e.assistants="assistants",e.azureAssistants="azureAssistants",e.agents="agents",e.custom="custom",e.bedrock="bedrock",e.chatGPTBrowser="chatGPTBrowser",e.gptPlugins="gptPlugins"}(S||(S={})),function(e){e.OPENAI="openAI",e.ANTHROPIC="anthropic",e.AZURE="azureOpenAI",e.GOOGLE="google",e.VERTEXAI="vertexai",e.BEDROCK="bedrock",e.MISTRALAI="mistralai",e.MISTRAL="mistral",e.OLLAMA="ollama",e.DEEPSEEK="deepseek",e.OPENROUTER="openrouter",e.XAI="xai"}(R||(R={})),new Set([S.anthropic,S.openAI,S.custom,S.azureOpenAI,S.google,R.VERTEXAI,R.MISTRALAI,R.MISTRAL,R.OLLAMA,R.DEEPSEEK,R.OPENROUTER,R.XAI]),new Set([R.OPENAI,R.AZURE,S.custom,R.MISTRALAI,R.MISTRAL,R.OLLAMA,R.DEEPSEEK,R.OPENROUTER,R.XAI]),new Set([S.agents,S.openAI,S.bedrock,S.azureOpenAI,S.anthropic,S.custom,S.google]),function(e){e.AI21="ai21",e.Amazon="amazon",e.Anthropic="anthropic",e.Cohere="cohere",e.Meta="meta",e.MistralAI="mistral",e.StabilityAI="stability",e.DeepSeek="deepseek"}(x||(x={}));var P,N,C,w;!function(e){e.low="low",e.auto="auto",e.high="high"}(P||(P={})),function(e){e.none="",e.minimal="minimal",e.low="low",e.medium="medium",e.high="high"}(N||(N={})),function(e){e.none="",e.auto="auto",e.concise="concise",e.detailed="detailed"}(C||(C={})),function(e){e.none="",e.low="low",e.medium="medium",e.high="high"}(w||(w={})),(h={})[P.low]=0,h[P.auto]=1,h[P.high]=2,P.low,P.auto,P.high;var k=o.nativeEnum(P),M=o.nativeEnum(N),D=o.nativeEnum(C),U=o.nativeEnum(w);(E={agent:{},id:"",name:"",description:"",instructions:"",model:"",model_parameters:{},tools:[],provider:{},projectIds:[],edges:[],artifacts:"",isCollaborative:!1,recursion_limit:void 0})[i.execute_code]=!1,E[i.file_search]=!1,E[i.web_search]=!1,E.category="general",E.support_contact={name:"",email:""},{type:i.function}[i.function]={name:"image_vision",description:"Get detailed text descriptions for all current image attachments.",parameters:{type:"object",properties:{},required:[]}};var j,G={model:{default:"gpt-4o-mini"},temperature:{min:0,max:2,step:.01,default:1},top_p:{min:0,max:1,step:.01,default:1},presence_penalty:{min:-2,max:2,step:.01,default:0},frequency_penalty:{min:-2,max:2,step:.01,default:0},resendFiles:{default:!0},maxContextTokens:{default:void 0},max_tokens:{default:void 0},imageDetail:{default:P.auto,min:0,max:2,step:1}},F=128e3,z=64e3,K=32e3,W={model:{default:"claude-3-5-sonnet-latest"},temperature:{min:0,max:1,step:.01,default:1},promptCache:{default:!0},thinking:{default:!0},thinkingBudget:{min:1024,step:100,max:2e5,default:2e3},maxOutputTokens:{min:1,max:F,step:1,default:8192,reset:function(e){return/claude-(?:sonnet|haiku)[-.]?[4-9]/.test(e)?z:/claude-opus[-.]?[4-9]/.test(e)?K:8192},set:function(e,t){return/claude-(?:sonnet|haiku)[-.]?[4-9]/.test(t)&&e>z?z:/claude-(?:opus|haiku)[-.]?[4-9]/.test(t)&&e>K?K:e>F?F:e}},topP:{min:0,max:1,step:.01,default:.7},topK:{min:1,max:40,step:1,default:5},resendFiles:{default:!0},maxContextTokens:{default:void 0},legacy:{maxOutputTokens:{min:1,max:4096,step:1,default:4096}},web_search:{default:!1}},B={model:{default:"gpt-3.5-turbo-test"},temperature:{min:0,max:1,step:.01,default:1},top_p:{min:0,max:1,step:.01,default:1},presence_penalty:{min:-2,max:2,step:.01,default:0},frequency_penalty:{min:-2,max:2,step:.01,default:0},resendFiles:{default:!0},maxContextTokens:{default:void 0},max_tokens:{default:void 0},imageDetail:{default:P.auto}},V=((T={})[S.openAI]=G,T[S.google]={model:{default:"gemini-1.5-flash-latest"},maxOutputTokens:{min:1,max:64e3,step:1,default:8192},temperature:{min:0,max:2,step:.01,default:1},topP:{min:0,max:1,step:.01,default:.95},topK:{min:1,max:40,step:1,default:40},thinking:{default:!0},thinkingBudget:{min:-1,max:32e3,step:1,default:-1}},T[S.anthropic]=W,T[S.agents]=B,T[S.bedrock]=B,T)[S.google],H=o.nativeEnum(S),q=o.union([H,o.string()]),Q=o.object({authField:o.string(),label:o.string(),description:o.string()}),Y=o.object({name:o.string(),pluginKey:o.string(),description:o.string().optional(),icon:o.string().optional(),authConfig:o.array(Q).optional(),authenticated:o.boolean().optional(),chatMenu:o.boolean().optional(),isButton:o.boolean().optional(),toolkit:o.boolean().optional()}),X=o.object({input:o.object({content:o.string()}),output:o.object({content:o.string()})});!function(e){e.functions="functions",e.classic="classic"}(j||(j={}));var $={default:0},J=(j.functions,j.functions,j.classic,{default:!0});o.nativeEnum(j);var Z=o.object({agent:o.string().default(j.functions),skipCompletion:o.boolean().default(J.default),model:o.string(),temperature:o.number().default($.default)});o.object({messageId:o.string(),endpoint:o.string().optional(),clientId:o.string().nullable().optional(),conversationId:o.string().nullable(),parentMessageId:o.string().nullable(),responseMessageId:o.string().nullable().optional(),overrideParentMessageId:o.string().nullable().optional(),bg:o.string().nullable().optional(),model:o.string().nullable().optional(),title:o.string().nullable().or(o.literal("New Chat")).default("New Chat"),sender:o.string().optional(),text:o.string(),generation:o.string().nullable().optional(),isCreatedByUser:o.boolean(),error:o.boolean().optional(),clientTimestamp:o.string().optional(),createdAt:o.string().optional().default((function(){return(new Date).toISOString()})),updatedAt:o.string().optional().default((function(){return(new Date).toISOString()})),current:o.boolean().optional(),unfinished:o.boolean().optional(),searchResult:o.boolean().optional(),finish_reason:o.string().optional(),thread_id:o.string().optional(),iconURL:o.string().nullable().optional(),feedback:y.optional()});var ee=o.union([o.number(),o.string()]).transform((function(e){return"string"==typeof e?""===e.trim()?void 0:parseFloat(e):e})),te=o.lazy((function(){return o.union([o.null(),o.boolean(),o.number(),o.string(),o.array(o.lazy((function(){return te}))),o.record(o.lazy((function(){return te})))])})),ne=o.object({conversationId:o.string().nullable(),endpoint:H.nullable(),endpointType:H.nullable().optional(),isArchived:o.boolean().optional(),title:o.string().nullable().or(o.literal("New Chat")).default("New Chat"),user:o.string().optional(),messages:o.array(o.string()).optional(),tools:o.union([o.array(Y),o.array(o.string())]).optional(),modelLabel:o.string().nullable().optional(),userLabel:o.string().optional(),model:o.string().nullable().optional(),promptPrefix:o.string().nullable().optional(),temperature:o.number().nullable().optional(),topP:o.number().optional(),topK:o.number().optional(),top_p:o.number().optional(),frequency_penalty:o.number().optional(),presence_penalty:o.number().optional(),parentMessageId:o.string().optional(),maxOutputTokens:ee.nullable().optional(),maxContextTokens:ee.optional(),max_tokens:ee.optional(),promptCache:o.boolean().optional(),system:o.string().optional(),thinking:o.boolean().optional(),thinkingBudget:ee.optional(),stream:o.boolean().optional(),artifacts:o.string().optional(),context:o.string().nullable().optional(),examples:o.array(X).optional(),tags:o.array(o.string()).optional(),createdAt:o.string(),updatedAt:o.string(),resendFiles:o.boolean().optional(),file_ids:o.array(o.string()).optional(),imageDetail:k.optional(),reasoning_effort:M.optional().nullable(),reasoning_summary:D.optional().nullable(),verbosity:U.optional().nullable(),useResponsesApi:o.boolean().optional(),web_search:o.boolean().optional(),disableStreaming:o.boolean().optional(),assistant_id:o.string().optional(),agent_id:o.string().optional(),region:o.string().optional(),maxTokens:ee.optional(),additionalModelRequestFields:te.optional(),instructions:o.string().optional(),additional_instructions:o.string().optional(),append_current_datetime:o.boolean().optional(),presetOverride:o.record(o.unknown()).optional(),stop:o.array(o.string()).optional(),greeting:o.string().optional(),spec:o.string().nullable().optional(),iconURL:o.string().nullable().optional(),expiredAt:o.string().nullable().optional(),fileTokenLimit:ee.optional(),resendImages:o.boolean().optional(),agentOptions:Z.nullable().optional(),chatGptLabel:o.string().nullable().optional()}),oe=ne.omit({conversationId:!0,createdAt:!0,updatedAt:!0,title:!0}).merge(o.object({conversationId:o.string().nullable().optional(),presetId:o.string().nullable().optional(),title:o.string().nullable().optional(),defaultPreset:o.boolean().optional(),order:o.number().optional(),endpoint:q.nullable()}));ne.merge(o.object({endpoint:q.nullable(),createdAt:o.string().optional(),updatedAt:o.string().optional()})),ne.pick({spec:!0,maxContextTokens:!0,resendFiles:!0,imageDetail:!0,promptPrefix:!0,model:!0,temperature:!0,presence_penalty:!0,frequency_penalty:!0,stop:!0,top_p:!0,max_tokens:!0,reasoning_effort:!0,reasoning_summary:!0,verbosity:!0,useResponsesApi:!0,web_search:!0,disableStreaming:!0,topP:!0,topK:!0,maxOutputTokens:!0,promptCache:!0,thinking:!0,thinkingBudget:!0,region:!0,maxTokens:!0,agent_id:!0,assistant_id:!0,append_current_datetime:!0,instructions:!0,fileTokenLimit:!0}).merge(o.object({endpoint:q.nullable()})),o.object({conversationId:o.string(),shareId:o.string(),messages:o.array(o.string()),isPublic:o.boolean(),title:o.string(),createdAt:o.string(),updatedAt:o.string()}),o.object({_id:o.string(),user:o.string(),tag:o.string(),description:o.string().optional(),createdAt:o.string(),updatedAt:o.string(),count:o.number(),position:o.number()});var ae=ne.pick({model:!0,modelLabel:!0,promptPrefix:!0,examples:!0,temperature:!0,maxOutputTokens:!0,artifacts:!0,topP:!0,topK:!0,thinking:!0,thinkingBudget:!0,web_search:!0,fileTokenLimit:!0,iconURL:!0,greeting:!0,spec:!0,maxContextTokens:!0});ae.transform((function(e){return re(e)})).catch((function(){return{}})),o.object({maxOutputTokens:ee.optional(),temperature:ee.optional(),topP:ee.optional(),topK:ee.optional(),presencePenalty:ee.optional(),frequencyPenalty:ee.optional(),stopSequences:o.array(o.string()).optional(),thinkingConfig:o.object({includeThoughts:o.boolean().optional(),thinkingBudget:ee.optional()}).optional(),web_search:o.boolean().optional()}).strip().optional();var ie=ne.pick({model:!0,modelLabel:!0,chatGptLabel:!0,promptPrefix:!0,temperature:!0,artifacts:!0,top_p:!0,presence_penalty:!0,frequency_penalty:!0,tools:!0,agentOptions:!0,iconURL:!0,greeting:!0,spec:!0,maxContextTokens:!0});function re(e,t){var n=d({},e);return Object.keys(n).forEach((function(e){var o=n[e];null==o&&delete n[e],t&&"string"==typeof o&&""===o&&delete n[e]})),n}ie.transform((function(e){var t,n,o,a,i,r,s,l,c,u,p,m,g,f,_=d(d({},e),{model:null!==(t=e.model)&&void 0!==t?t:"gpt-3.5-turbo",chatGptLabel:null!==(o=null!==(n=e.chatGptLabel)&&void 0!==n?n:e.modelLabel)&&void 0!==o?o:null,promptPrefix:null!==(a=e.promptPrefix)&&void 0!==a?a:null,temperature:null!==(i=e.temperature)&&void 0!==i?i:.8,top_p:null!==(r=e.top_p)&&void 0!==r?r:1,presence_penalty:null!==(s=e.presence_penalty)&&void 0!==s?s:0,frequency_penalty:null!==(l=e.frequency_penalty)&&void 0!==l?l:0,tools:null!==(c=e.tools)&&void 0!==c?c:[],agentOptions:null!==(u=e.agentOptions)&&void 0!==u?u:{agent:j.functions,skipCompletion:!0,model:"gpt-3.5-turbo",temperature:0},iconURL:null!==(p=e.iconURL)&&void 0!==p?p:void 0,greeting:null!==(m=e.greeting)&&void 0!==m?m:void 0,spec:null!==(g=e.spec)&&void 0!==g?g:void 0,maxContextTokens:null!==(f=e.maxContextTokens)&&void 0!==f?f:void 0});return null!=e.modelLabel&&""!==e.modelLabel&&(_.modelLabel=null),_})).catch((function(){return{model:"gpt-3.5-turbo",chatGptLabel:null,promptPrefix:null,temperature:.8,top_p:1,presence_penalty:0,frequency_penalty:0,tools:[],agentOptions:{agent:j.functions,skipCompletion:!0,model:"gpt-3.5-turbo",temperature:0},iconURL:void 0,greeting:void 0,spec:void 0,maxContextTokens:void 0}})),ne.pick({model:!0,assistant_id:!0,instructions:!0,artifacts:!0,promptPrefix:!0,iconURL:!0,greeting:!0,spec:!0,append_current_datetime:!0}).transform((function(e){var t,n,o,a,i,r,s,l;return d(d({},e),{model:null!==(t=e.model)&&void 0!==t?t:G.model.default,assistant_id:null!==(n=e.assistant_id)&&void 0!==n?n:void 0,instructions:null!==(o=e.instructions)&&void 0!==o?o:void 0,promptPrefix:null!==(a=e.promptPrefix)&&void 0!==a?a:null,iconURL:null!==(i=e.iconURL)&&void 0!==i?i:void 0,greeting:null!==(r=e.greeting)&&void 0!==r?r:void 0,spec:null!==(s=e.spec)&&void 0!==s?s:void 0,append_current_datetime:null!==(l=e.append_current_datetime)&&void 0!==l&&l})})).catch((function(){return{model:G.model.default,assistant_id:void 0,instructions:void 0,promptPrefix:null,iconURL:void 0,greeting:void 0,spec:void 0,append_current_datetime:!1}})),ne.pick({model:!0,assistant_id:!0,instructions:!0,promptPrefix:!0,artifacts:!0,iconURL:!0,greeting:!0,spec:!0}).transform((function(e){return re(e)})).catch((function(){return{}})),ne.pick({model:!0,modelLabel:!0,temperature:!0,top_p:!0,presence_penalty:!0,frequency_penalty:!0,resendFiles:!0,imageDetail:!0,agent_id:!0,instructions:!0,promptPrefix:!0,iconURL:!0,greeting:!0,maxContextTokens:!0}).transform((function(e){var t,n,o,a,i,r,s,l,c,u,p,m,g;return d(d({},e),{model:null!==(t=e.model)&&void 0!==t?t:B.model.default,modelLabel:null!==(n=e.modelLabel)&&void 0!==n?n:null,temperature:null!==(o=e.temperature)&&void 0!==o?o:1,top_p:null!==(a=e.top_p)&&void 0!==a?a:1,presence_penalty:null!==(i=e.presence_penalty)&&void 0!==i?i:0,frequency_penalty:null!==(r=e.frequency_penalty)&&void 0!==r?r:0,resendFiles:"boolean"==typeof e.resendFiles?e.resendFiles:B.resendFiles.default,imageDetail:null!==(s=e.imageDetail)&&void 0!==s?s:P.auto,agent_id:null!==(l=e.agent_id)&&void 0!==l?l:void 0,instructions:null!==(c=e.instructions)&&void 0!==c?c:void 0,promptPrefix:null!==(u=e.promptPrefix)&&void 0!==u?u:null,iconURL:null!==(p=e.iconURL)&&void 0!==p?p:void 0,greeting:null!==(m=e.greeting)&&void 0!==m?m:void 0,maxContextTokens:null!==(g=e.maxContextTokens)&&void 0!==g?g:void 0})})).catch((function(){return{model:B.model.default,modelLabel:null,temperature:1,top_p:1,presence_penalty:0,frequency_penalty:0,resendFiles:B.resendFiles.default,imageDetail:P.auto,agent_id:void 0,instructions:void 0,promptPrefix:null,iconURL:void 0,greeting:void 0,maxContextTokens:void 0}})),ne.pick({model:!0,modelLabel:!0,chatGptLabel:!0,promptPrefix:!0,temperature:!0,top_p:!0,presence_penalty:!0,frequency_penalty:!0,resendFiles:!0,artifacts:!0,imageDetail:!0,stop:!0,iconURL:!0,greeting:!0,spec:!0,maxContextTokens:!0,max_tokens:!0,reasoning_effort:!0,reasoning_summary:!0,verbosity:!0,useResponsesApi:!0,web_search:!0,disableStreaming:!0,fileTokenLimit:!0}).transform((function(e){return re(e,!0)})).catch((function(){return{}})),ae.transform((function(e){var t=d({},e);return t.temperature===V.temperature.default&&delete t.temperature,t.maxOutputTokens===V.maxOutputTokens.default&&delete t.maxOutputTokens,t.topP===V.topP.default&&delete t.topP,t.topK===V.topK.default&&delete t.topK,re(t)})).catch((function(){return{}})),ne.pick({model:!0,modelLabel:!0,promptPrefix:!0,temperature:!0,maxOutputTokens:!0,topP:!0,topK:!0,resendFiles:!0,promptCache:!0,thinking:!0,thinkingBudget:!0,artifacts:!0,iconURL:!0,greeting:!0,spec:!0,maxContextTokens:!0,web_search:!0,fileTokenLimit:!0,stop:!0,stream:!0}).transform((function(e){return re(e)})).catch((function(){return{}})),ie.transform((function(e){var t,n=d({},e);return null===n.modelLabel&&delete n.modelLabel,null===n.chatGptLabel&&delete n.chatGptLabel,null===n.promptPrefix&&delete n.promptPrefix,.8===n.temperature&&delete n.temperature,1===n.top_p&&delete n.top_p,0===n.presence_penalty&&delete n.presence_penalty,0===n.frequency_penalty&&delete n.frequency_penalty,0===(null===(t=n.tools)||void 0===t?void 0:t.length)&&delete n.tools,n.agentOptions&&n.agentOptions.agent===j.functions&&!0===n.agentOptions.skipCompletion&&"gpt-3.5-turbo"===n.agentOptions.model&&0===n.agentOptions.temperature&&delete n.agentOptions,re(n)})).catch((function(){return{}})),o.object({bannerId:o.string(),message:o.string(),displayFrom:o.string(),displayTo:o.string(),createdAt:o.string(),updatedAt:o.string(),isPublic:o.boolean()}),ne.pick({spec:!0,iconURL:!0,greeting:!0,agent_id:!0,instructions:!0,additional_instructions:!0}).transform((function(e){return re(e)})).catch((function(){return{}}));var se,le,ce=o.object({name:o.string(),label:o.string(),preset:oe,order:o.number().optional(),default:o.boolean().optional(),description:o.string().optional(),group:o.string().optional(),showIconInMenu:o.boolean().optional(),showIconInHeader:o.boolean().optional(),iconURL:o.union([o.string(),H]).optional(),authType:L.optional(),webSearch:o.boolean().optional(),fileSearch:o.boolean().optional(),executeCode:o.boolean().optional(),mcpServers:o.array(o.string()).optional()}),ue=o.object({enforce:o.boolean().default(!1),prioritize:o.boolean().default(!0),list:o.array(ce).min(1),addedEndpoints:o.array(o.union([o.string(),H])).optional()});(se={})[S.openAI]=!0,se[S.google]=!0,se[S.assistants]=!0,se[S.azureAssistants]=!0,se[S.agents]=!0,se[S.azureOpenAI]=!0,se[S.anthropic]=!0,se[S.custom]=!0,se[S.bedrock]=!0;var pe=["application/vnd.ms-excel","application/msexcel","application/x-msexcel","application/x-ms-excel","application/x-excel","application/x-dos_ms_excel","application/xls","application/x-xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"];_(["text/x-c","text/x-c++","application/csv","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/html","text/x-java","application/json","text/markdown","application/pdf","text/x-php","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/x-python","text/x-script.python","text/x-ruby","text/x-tex","text/plain","text/css","text/vtt","image/jpeg","text/javascript","image/gif","image/png","image/heic","image/heif","application/x-tar","application/typescript","application/xml","application/zip","image/svg","image/svg+xml","video/mp4","video/avi","video/mov","video/wmv","video/flv","video/webm","video/mkv","video/m4v","video/3gp","video/ogv","audio/mp3","audio/wav","audio/ogg","audio/m4a","audio/aac","audio/flac","audio/wma","audio/opus","audio/mpeg"],pe,!0),_(["text/x-c","text/x-c++","application/csv","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/html","text/x-java","application/json","text/markdown","application/pdf","text/x-php","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/x-python","text/x-script.python","text/x-ruby","text/x-tex","text/plain","text/css","image/jpeg","text/javascript","image/gif","image/png","image/heic","image/heif","application/x-tar","application/typescript","application/xml","application/zip"],pe,!0);var de=[/^(text\/(x-c|x-csharp|tab-separated-values|x-c\+\+|x-h|x-java|html|markdown|x-php|x-python|x-script\.python|x-ruby|x-tex|plain|css|vtt|javascript|csv|xml))$/,/^application\/(vnd\.ms-excel|msexcel|x-msexcel|x-ms-excel|x-excel|x-dos_ms_excel|xls|x-xls|vnd\.openxmlformats-officedocument\.spreadsheetml\.sheet)$/,/^(application\/(epub\+zip|csv|json|pdf|x-tar|typescript|vnd\.openxmlformats-officedocument\.(wordprocessingml\.document|presentationml\.presentation|spreadsheetml\.sheet)|xml|zip))$/,/^image\/(jpeg|gif|png|webp|heic|heif)$/,/^video\/(mp4|avi|mov|wmv|flv|webm|mkv|m4v|3gp|ogv)$/,/^audio\/(mp3|mpeg|mpeg3|wav|wave|x-wav|ogg|vorbis|mp4|m4a|x-m4a|flac|x-flac|webm|aac|wma|opus)$/,/^image\/(svg|svg\+xml)$/],me=1048576*512,ge={fileLimit:10,fileSizeLimit:me,totalSizeLimit:me,supportedMimeTypes:de,disabled:!1};(le={})[S.assistants]=ge,le[S.azureAssistants]=ge,le[S.agents]=ge,le[S.anthropic]={fileLimit:10,fileSizeLimit:me,totalSizeLimit:me,supportedMimeTypes:de,disabled:!1},le.default={fileLimit:10,fileSizeLimit:me,totalSizeLimit:me,supportedMimeTypes:de,disabled:!1};var fe,_e,be,ve,he,Ee=o.array(o.any()).optional().refine((function(e){return!e||e.every((function(e){return e instanceof RegExp||"string"==typeof e}))}),{message:"Each mimeType must be a string or a RegExp object."}),Te=o.object({disabled:o.boolean().optional(),fileLimit:o.number().min(0).optional(),fileSizeLimit:o.number().min(0).optional(),totalSizeLimit:o.number().min(0).optional(),supportedMimeTypes:Ee.optional()}),Ae=o.object({endpoints:o.record(Te).optional(),serverFileSizeLimit:o.number().min(0).optional(),avatarSizeLimit:o.number().min(0).optional(),fileTokenLimit:o.number().min(0).optional(),imageGeneration:o.object({percentage:o.number().min(0).max(100).optional(),px:o.number().min(0).optional()}).optional(),clientImageResize:o.object({enabled:o.boolean().optional(),maxWidth:o.number().min(0).optional(),maxHeight:o.number().min(0).optional(),quality:o.number().min(0).max(1).optional()}).optional(),ocr:o.object({supportedMimeTypes:Ee.optional()}).optional(),text:o.object({supportedMimeTypes:Ee.optional()}).optional()});!function(e){e.local="local",e.firebase="firebase",e.azure="azure",e.azure_blob="azure_blob",e.openai="openai",e.s3="s3",e.vectordb="vectordb",e.execute_code="execute_code",e.mistral_ocr="mistral_ocr",e.azure_mistral_ocr="azure_mistral_ocr",e.vertexai_mistral_ocr="vertexai_mistral_ocr",e.text="text"}(fe||(fe={})),function(e){e.avatar="avatar",e.unknown="unknown",e.agents="agents",e.assistants="assistants",e.execute_code="execute_code",e.image_generation="image_generation",e.assistants_output="assistants_output",e.message_attachment="message_attachment",e.filename="filename",e.updatedAt="updatedAt",e.source="source",e.filterSource="filterSource",e.context="context",e.bytes="bytes"}(_e||(_e={})),function(e){e.ServiceHttp="service_http",e.OAuth="oauth",e.None="none"}(be||(be={})),function(e){e.Bearer="bearer",e.Basic="basic",e.Custom="custom"}(ve||(ve={})),function(e){e.DefaultPost="default_post",e.BasicAuthHeader="basic_auth_header"}(he||(he={}));var Oe=/^\${(.+)}$/;function Ie(e){if(!e)return e;var t=e.trim(),n=t.match(Oe);if(n){var o=n[1];return process.env[o]||t}for(var a,i=/\${([^}]+)}/g,r=t,s=[];null!==(a=i.exec(t));)s.push({fullMatch:a[0],varName:a[1],index:a.index});for(var l=s.length-1;l>=0;l--){var c=s[l],u=c.fullMatch,p=(o=c.varName,c.index),d=process.env[o]||u;r=r.substring(0,p)+d+r.substring(p+u.length)}return r}var ye=o.object({startup:o.boolean().optional(),iconPath:o.string().optional(),timeout:o.number().optional(),initTimeout:o.number().optional(),chatMenu:o.boolean().optional(),serverInstructions:o.union([o.boolean(),o.string()]).optional(),requiresOAuth:o.boolean().optional(),oauth:o.object({authorization_url:o.string().url().optional(),token_url:o.string().url().optional(),client_id:o.string().optional(),client_secret:o.string().optional(),scope:o.string().optional(),redirect_uri:o.string().url().optional(),token_exchange_method:o.nativeEnum(he).optional(),grant_types_supported:o.array(o.string()).optional(),token_endpoint_auth_methods_supported:o.array(o.string()).optional(),response_types_supported:o.array(o.string()).optional(),code_challenge_methods_supported:o.array(o.string()).optional(),revocation_endpoint:o.string().url().optional(),revocation_endpoint_auth_methods_supported:o.array(o.string()).optional()}).optional(),oauth_headers:o.record(o.string(),o.string()).optional(),customUserVars:o.record(o.string(),o.object({title:o.string(),description:o.string()})).optional()}),Se=ye.extend({type:o.literal("stdio").optional(),command:o.string(),args:o.array(o.string()),env:o.record(o.string(),o.string()).optional().transform((function(e){if(!e)return e;for(var t={},n=0,o=Object.entries(e);n<o.length;n++){var a=o[n],i=a[0],r=a[1];t[i]=Ie(r)}return t})),stderr:o.any().optional()}),Re=ye.extend({type:o.literal("websocket").optional(),url:o.string().transform((function(e){return Ie(e)})).pipe(o.string().url()).refine((function(e){var t=new URL(e).protocol;return"ws:"===t||"wss:"===t}),{message:"WebSocket URL must start with ws:// or wss://"})}),xe=ye.extend({type:o.literal("sse").optional(),headers:o.record(o.string(),o.string()).optional(),url:o.string().transform((function(e){return Ie(e)})).pipe(o.string().url()).refine((function(e){var t=new URL(e).protocol;return"ws:"!==t&&"wss:"!==t}),{message:"SSE URL must not start with ws:// or wss://"})}),Le=ye.extend({type:o.union([o.literal("streamable-http"),o.literal("http")]),headers:o.record(o.string(),o.string()).optional(),url:o.string().transform((function(e){return Ie(e)})).pipe(o.string().url()).refine((function(e){var t=new URL(e).protocol;return"ws:"!==t&&"wss:"!==t}),{message:"Streamable HTTP URL must not start with ws:// or wss://"})}),Pe=o.union([Se,Re,xe,Le]),Ne=o.record(o.string(),Pe),Ce="";if("undefined"==typeof process||!0===process.browser){var we=document.querySelector("base");Ce=(null==we?void 0:we.getAttribute("href"))||"/"}Ce&&Ce.endsWith("/")&&(Ce=Ce.slice(0,-1));var ke,Me,De,Ue,je,Ge,Fe,ze,Ke,We=function(){return Ce},Be="".concat(Ce,"/api/messages"),Ve=function(e){var t=e.conversationId,n=e.messageId,o=m(e,["conversationId","messageId"]);return t&&n?"".concat(Be,"/").concat(t,"/").concat(n):t?"".concat(Be,"/").concat(t):"".concat(Be).concat(function(e){var t=Object.entries(e).filter((function(e){var t=e[1];return Array.isArray(t)?t.length>0:null!=t&&""!==t})).map((function(e){var t=e[0],n=e[1];return Array.isArray(n)?n.map((function(e){return"".concat(t,"=").concat(encodeURIComponent(e))})).join("&"):"".concat(t,"=").concat(encodeURIComponent(String(n)))})).join("&");return t?"?".concat(t):""}(o))},He="".concat(Ce,"/api/share"),qe="".concat(Ce,"/api/keys"),Qe="".concat(Ce,"/api/convos"),Ye=function(){return"".concat("".concat(Ce,"/api/files"),"/speech")};!function(e){e.default="default",e.advanced="advanced"}(Ke||(Ke={}));var Xe,$e,Je=o.nativeEnum(fe),Ze=o.object({default:Je.optional(),avatar:Je.optional(),image:Je.optional(),document:Je.optional()}).optional(),et=o.object({deploymentName:o.string().optional(),version:o.string().optional(),assistants:o.boolean().optional()}).or(o.boolean()),tt=o.object({apiKey:o.string(),serverless:o.boolean().optional(),instanceName:o.string().optional(),deploymentName:o.string().optional(),assistants:o.boolean().optional(),addParams:o.record(o.any()).optional(),dropParams:o.array(o.string()).optional(),forcePrompt:o.boolean().optional(),version:o.string().optional(),baseURL:o.string().optional(),additionalHeaders:o.record(o.any()).optional()}),nt=o.object({group:o.string(),models:o.record(o.string(),et)}).required().and(tt),ot=o.array(nt).min(1);!function(e){e.code_interpreter="code_interpreter",e.image_vision="image_vision",e.retrieval="retrieval",e.actions="actions",e.tools="tools"}(Xe||(Xe={})),function(e){e.hide_sequential_outputs="hide_sequential_outputs",e.end_after_tools="end_after_tools",e.execute_code="execute_code",e.file_search="file_search",e.web_search="web_search",e.artifacts="artifacts",e.actions="actions",e.context="context",e.tools="tools",e.chain="chain",e.ocr="ocr"}($e||($e={})),(ke={})[S.assistants]=2,ke[S.azureAssistants]=1;var at=o.object({streamRate:o.number().optional(),baseURL:o.string().optional(),titlePrompt:o.string().optional(),titleModel:o.string().optional(),titleConvo:o.boolean().optional(),titleMethod:o.union([o.literal("completion"),o.literal("functions"),o.literal("structured")]).optional(),titleEndpoint:o.string().optional(),titlePromptTemplate:o.string().optional()});at.merge(o.object({availableRegions:o.array(o.string()).optional()}));var it,rt=o.union([o.string(),o.object({name:o.string(),description:o.string().optional()})]),st=at.merge(o.object({disableBuilder:o.boolean().optional(),pollIntervalMs:o.number().optional(),timeoutMs:o.number().optional(),version:o.union([o.string(),o.number()]).default(2),supportedIds:o.array(o.string()).min(1).optional(),excludedIds:o.array(o.string()).min(1).optional(),privateAssistants:o.boolean().optional(),retrievalModels:o.array(o.string()).min(1).optional().default(["gpt-4o","o1-preview-2024-09-12","o1-preview","o1-mini-2024-09-12","o1-mini","o3-mini","chatgpt-4o-latest","gpt-4o-2024-05-13","gpt-4o-2024-08-06","gpt-4o-mini","gpt-4o-mini-2024-07-18","gpt-4-turbo-preview","gpt-3.5-turbo-0125","gpt-4-0125-preview","gpt-4-1106-preview","gpt-3.5-turbo-1106","gpt-3.5-turbo-0125","gpt-4-turbo","gpt-4-0125","gpt-4-1106"]),capabilities:o.array(o.nativeEnum(Xe)).optional().default([Xe.code_interpreter,Xe.image_vision,Xe.retrieval,Xe.actions,Xe.tools]),apiKey:o.string().optional(),models:o.object({default:o.array(rt).min(1),fetch:o.boolean().optional(),userIdQuery:o.boolean().optional()}).optional(),headers:o.record(o.any()).optional()})),lt=[$e.execute_code,$e.file_search,$e.web_search,$e.artifacts,$e.actions,$e.context,$e.tools,$e.chain,$e.ocr],ct=at.merge(o.object({recursionLimit:o.number().optional(),disableBuilder:o.boolean().optional().default(!1),maxRecursionLimit:o.number().optional(),maxCitations:o.number().min(1).max(50).optional().default(30),maxCitationsPerFile:o.number().min(1).max(10).optional().default(7),minRelevanceScore:o.number().min(0).max(1).optional().default(.45),allowedProviders:o.array(o.union([o.string(),H])).optional(),capabilities:o.array(o.nativeEnum($e)).optional().default(lt)})).default({disableBuilder:!1,capabilities:lt,maxCitations:30,maxCitationsPerFile:7,minRelevanceScore:.45}),ut=at.merge(o.object({name:o.string().refine((function(e){return!H.safeParse(e).success}),{message:"Value cannot be one of the default endpoint (EModelEndpoint) values: ".concat(Object.values(S).join(", "))}),apiKey:o.string(),baseURL:o.string(),models:o.object({default:o.array(rt).min(1),fetch:o.boolean().optional(),userIdQuery:o.boolean().optional()}),summarize:o.boolean().optional(),summaryModel:o.string().optional(),iconURL:o.string().optional(),forcePrompt:o.boolean().optional(),modelDisplayLabel:o.string().optional(),headers:o.record(o.any()).optional(),addParams:o.record(o.any()).optional(),dropParams:o.array(o.string()).optional(),customParams:o.object({defaultParamsEndpoint:o.string().default("custom"),paramDefinitions:o.array(o.record(o.any())).optional()}).strict(),customOrder:o.number().optional(),directEndpoint:o.boolean().optional(),titleMessageRole:o.string().optional()})),pt=o.object({groups:ot,plugins:o.boolean().optional(),assistants:o.boolean().optional()}).and(ut.pick({streamRate:!0,titleConvo:!0,titleMethod:!0,titleModel:!0,titlePrompt:!0,titlePromptTemplate:!0,summarize:!0,summaryModel:!0,customOrder:!0}).partial()),dt=o.object({url:o.string().optional(),apiKey:o.string(),model:o.string(),voices:o.array(o.string())}),mt=o.object({instanceName:o.string(),apiKey:o.string(),deploymentName:o.string(),apiVersion:o.string(),model:o.string(),voices:o.array(o.string())}),gt=o.object({url:o.string().optional(),websocketUrl:o.string().optional(),apiKey:o.string(),model:o.string(),voices:o.array(o.string()),voice_settings:o.object({similarity_boost:o.number().optional(),stability:o.number().optional(),style:o.number().optional(),use_speaker_boost:o.boolean().optional()}).optional(),pronunciation_dictionary_locators:o.array(o.string()).optional()}),ft=o.object({url:o.string(),apiKey:o.string().optional(),voices:o.array(o.string()),backend:o.string()}),_t=o.object({openai:dt.optional(),azureOpenAI:mt.optional(),elevenlabs:gt.optional(),localai:ft.optional()}),bt=o.object({url:o.string().optional(),apiKey:o.string(),model:o.string()}),vt=o.object({instanceName:o.string(),apiKey:o.string(),deploymentName:o.string(),apiVersion:o.string()}),ht=o.object({openai:bt.optional(),azureOpenAI:vt.optional()}),Et=o.object({conversationMode:o.boolean().optional(),advancedMode:o.boolean().optional(),speechToText:o.boolean().optional().or(o.object({engineSTT:o.string().optional(),languageSTT:o.string().optional(),autoTranscribeAudio:o.boolean().optional(),decibelValue:o.number().optional(),autoSendText:o.number().optional()})).optional(),textToSpeech:o.boolean().optional().or(o.object({engineTTS:o.string().optional(),voice:o.string().optional(),languageTTS:o.string().optional(),automaticPlayback:o.boolean().optional(),playbackRate:o.number().optional(),cacheTTS:o.boolean().optional()})).optional()}).optional();!function(e){e.FILE_UPLOAD="FILE_UPLOAD",e.IMPORT="IMPORT",e.TTS="TTS",e.STT="STT"}(it||(it={}));var Tt,At=o.object({fileUploads:o.object({ipMax:o.number().optional(),ipWindowInMinutes:o.number().optional(),userMax:o.number().optional(),userWindowInMinutes:o.number().optional()}).optional(),conversationsImport:o.object({ipMax:o.number().optional(),ipWindowInMinutes:o.number().optional(),userMax:o.number().optional(),userWindowInMinutes:o.number().optional()}).optional(),tts:o.object({ipMax:o.number().optional(),ipWindowInMinutes:o.number().optional(),userMax:o.number().optional(),userWindowInMinutes:o.number().optional()}).optional(),stt:o.object({ipMax:o.number().optional(),ipWindowInMinutes:o.number().optional(),userMax:o.number().optional(),userWindowInMinutes:o.number().optional()}).optional()});!function(e){e.PNG="png",e.WEBP="webp",e.JPEG="jpeg"}(Tt||(Tt={}));var Ot,It,yt,St,Rt,xt,Lt=o.object({externalUrl:o.string().optional(),openNewTab:o.boolean().optional(),modalAcceptance:o.boolean().optional(),modalTitle:o.string().optional(),modalContent:o.string().or(o.array(o.string())).optional()}),Pt=o.object({placeholder:o.string().optional()}),Nt=o.object({privacyPolicy:o.object({externalUrl:o.string().optional(),openNewTab:o.boolean().optional()}).optional(),termsOfService:Lt.optional(),customWelcome:o.string().optional(),mcpServers:Pt.optional(),endpointsMenu:o.boolean().optional(),modelSelect:o.boolean().optional(),parameters:o.boolean().optional(),sidePanel:o.boolean().optional(),multiConvo:o.boolean().optional(),bookmarks:o.boolean().optional(),memories:o.boolean().optional(),presets:o.boolean().optional(),prompts:o.boolean().optional(),agents:o.boolean().optional(),temporaryChat:o.boolean().optional(),temporaryChatRetention:o.number().min(1).max(8760).optional(),runCode:o.boolean().optional(),webSearch:o.boolean().optional(),peoplePicker:o.object({users:o.boolean().optional(),groups:o.boolean().optional(),roles:o.boolean().optional()}).optional(),marketplace:o.object({use:o.boolean().optional()}).optional(),fileSearch:o.boolean().optional(),fileCitations:o.boolean().optional()}).default({endpointsMenu:!0,modelSelect:!0,parameters:!0,sidePanel:!0,presets:!0,multiConvo:!0,bookmarks:!0,memories:!0,prompts:!0,agents:!0,temporaryChat:!0,runCode:!0,webSearch:!0,peoplePicker:{users:!0,groups:!0,roles:!0},marketplace:{use:!1},fileSearch:!0,fileCitations:!0}),Ct=o.object({language:o.string().default("auto"),size:o.enum(["normal","compact","flexible","invisible"]).default("normal")}).default({language:"auto",size:"normal"}),wt=o.object({siteKey:o.string(),options:Ct.optional()});!function(e){e.MISTRAL_OCR="mistral_ocr",e.CUSTOM_OCR="custom_ocr",e.AZURE_MISTRAL_OCR="azure_mistral_ocr",e.VERTEXAI_MISTRAL_OCR="vertexai_mistral_ocr"}(Ot||(Ot={})),function(e){e.PROVIDERS="providers",e.SCRAPERS="scrapers",e.RERANKERS="rerankers"}(It||(It={})),function(e){e.SERPER="serper",e.SEARXNG="searxng"}(yt||(yt={})),function(e){e.FIRECRAWL="firecrawl",e.SERPER="serper"}(St||(St={})),function(e){e.JINA="jina",e.COHERE="cohere"}(Rt||(Rt={})),function(e){e[e.OFF=0]="OFF",e[e.MODERATE=1]="MODERATE",e[e.STRICT=2]="STRICT"}(xt||(xt={}));var kt,Mt,Dt=o.object({serperApiKey:o.string().optional().default("${SERPER_API_KEY}"),searxngInstanceUrl:o.string().optional().default("${SEARXNG_INSTANCE_URL}"),searxngApiKey:o.string().optional().default("${SEARXNG_API_KEY}"),firecrawlApiKey:o.string().optional().default("${FIRECRAWL_API_KEY}"),firecrawlApiUrl:o.string().optional().default("${FIRECRAWL_API_URL}"),firecrawlVersion:o.string().optional().default("${FIRECRAWL_VERSION}"),jinaApiKey:o.string().optional().default("${JINA_API_KEY}"),jinaApiUrl:o.string().optional().default("${JINA_API_URL}"),cohereApiKey:o.string().optional().default("${COHERE_API_KEY}"),searchProvider:o.nativeEnum(yt).optional(),scraperProvider:o.nativeEnum(St).optional(),rerankerType:o.nativeEnum(Rt).optional(),scraperTimeout:o.number().optional(),safeSearch:o.nativeEnum(xt).default(xt.MODERATE),firecrawlOptions:o.object({formats:o.array(o.string()).optional(),includeTags:o.array(o.string()).optional(),excludeTags:o.array(o.string()).optional(),headers:o.record(o.string()).optional(),waitFor:o.number().optional(),timeout:o.number().optional(),maxAge:o.number().optional(),mobile:o.boolean().optional(),skipTlsVerification:o.boolean().optional(),blockAds:o.boolean().optional(),removeBase64Images:o.boolean().optional(),parsePDF:o.boolean().optional(),storeInCache:o.boolean().optional(),zeroDataRetention:o.boolean().optional(),location:o.object({country:o.string().optional(),languages:o.array(o.string()).optional()}).optional(),onlyMainContent:o.boolean().optional(),changeTrackingOptions:o.object({modes:o.array(o.string()).optional(),schema:o.record(o.unknown()).optional(),prompt:o.string().optional(),tag:o.string().nullable().optional()}).optional()}).optional()}),Ut=o.object({mistralModel:o.string().optional(),apiKey:o.string().optional().default("${OCR_API_KEY}"),baseURL:o.string().optional().default("${OCR_BASEURL}"),strategy:o.nativeEnum(Ot).default(Ot.MISTRAL_OCR)}),jt=o.object({enabled:o.boolean().optional().default(!1),startBalance:o.number().optional().default(2e4),autoRefillEnabled:o.boolean().optional().default(!1),refillIntervalValue:o.number().optional().default(30),refillIntervalUnit:o.enum(["seconds","minutes","hours","days","weeks","months"]).optional().default("days"),refillAmount:o.number().optional().default(1e4)}),Gt=o.object({enabled:o.boolean().optional().default(!0)}),Ft=o.object({disabled:o.boolean().optional(),validKeys:o.array(o.string()).optional(),tokenLimit:o.number().optional(),charLimit:o.number().optional().default(1e4),personalize:o.boolean().default(!0),messageWindowSize:o.number().optional().default(5),agent:o.union([o.object({id:o.string()}),o.object({provider:o.string(),model:o.string(),instructions:o.string().optional(),model_parameters:o.record(o.any()).optional()})]).optional()}),zt=o.array(ut.partial()).optional();o.object({version:o.string(),cache:o.boolean().default(!0),ocr:Ut.optional(),webSearch:Dt.optional(),memory:Ft.optional(),secureImageLinks:o.boolean().optional(),imageOutputType:o.nativeEnum(Tt).default(Tt.PNG),includedTools:o.array(o.string()).optional(),filteredTools:o.array(o.string()).optional(),mcpServers:Ne.optional(),interface:Nt,turnstile:wt.optional(),fileStrategy:Je.default(fe.local),fileStrategies:Ze,actions:o.object({allowedDomains:o.array(o.string()).optional()}).optional(),registration:o.object({socialLogins:o.array(o.string()).optional(),allowedDomains:o.array(o.string()).optional()}).default({socialLogins:["google","facebook","openid","github","discord","saml"]}),balance:jt.optional(),transactions:Gt.optional(),speech:o.object({tts:_t.optional(),stt:ht.optional(),speechTab:Et.optional()}).optional(),rateLimits:At.optional(),fileConfig:Ae.optional(),modelSpecs:ue.optional(),endpoints:o.object((Me={all:at.optional()},Me[S.openAI]=at.optional(),Me[S.google]=at.optional(),Me[S.anthropic]=at.optional(),Me[S.gptPlugins]=at.optional(),Me[S.azureOpenAI]=pt.optional(),Me[S.azureAssistants]=st.optional(),Me[S.assistants]=st.optional(),Me[S.agents]=ct.optional(),Me[S.custom]=zt.optional(),Me[S.bedrock]=at.optional(),Me)).strict().refine((function(e){return Object.keys(e).length>0}),{message:"At least one `endpoints` field must be provided."}).optional()}),function(e){e.anyscale="anyscale",e.apipie="apipie",e.cohere="cohere",e.fireworks="fireworks",e.deepseek="deepseek",e.groq="groq",e.huggingface="huggingface",e.mistral="mistral",e.mlx="mlx",e.ollama="ollama",e.openrouter="openrouter",e.perplexity="perplexity",e.shuttleai="shuttleai",e["together.ai"]="together.ai",e.unify="unify",e.vercel="vercel",e.xai="xai"}(kt||(kt={})),function(e){e.openrouter="openrouter"}(Mt||(Mt={})),S.openAI,S.assistants,S.azureAssistants,S.azureOpenAI,S.agents,S.chatGPTBrowser,S.gptPlugins,S.google,S.anthropic,S.custom,S.bedrock,(De={})[S.openAI]="OpenAI",De[S.assistants]="Assistants",De[S.agents]="My Agents",De[S.azureAssistants]="Azure Assistants",De[S.azureOpenAI]="Azure OpenAI",De[S.chatGPTBrowser]="ChatGPT",De[S.gptPlugins]="Plugins",De[S.google]="Google",De[S.anthropic]="Anthropic",De[S.custom]="Custom",De[S.bedrock]="AWS Bedrock",De[kt.ollama]="Ollama",De[kt.deepseek]="DeepSeek",De[kt.xai]="xAI",De[kt.vercel]="Vercel";var Kt,Wt,Bt,Vt,Ht,qt,Qt,Yt,Xt,$t,Jt,Zt,en,tn,nn,on,an=["gpt-5","gpt-5-mini","gpt-5-nano","gpt-5-chat-latest","gpt-4.1","gpt-4.1-mini","gpt-4.1-nano","gpt-4o-mini","gpt-4o","gpt-4.5-preview","gpt-4.5-preview-2025-02-27","gpt-3.5-turbo","gpt-3.5-turbo-0125","gpt-4-turbo","gpt-4-turbo-2024-04-09","gpt-4-0125-preview","gpt-4-turbo-preview","gpt-4-1106-preview","gpt-3.5-turbo-1106","gpt-3.5-turbo-16k-0613","gpt-3.5-turbo-16k","gpt-4","gpt-4-0314","gpt-4-32k-0314","gpt-4-0613","gpt-3.5-turbo-0613"],rn=((Ue={})[S.azureAssistants]=an,Ue[S.assistants]=_(_([],an,!0),["chatgpt-4o-latest"],!1),Ue[S.agents]=an,Ue[S.google]=["gemini-2.5-pro","gemini-2.5-flash","gemini-2.5-flash-lite","gemini-2.0-flash-001","gemini-2.0-flash-lite"],Ue[S.anthropic]=["claude-sonnet-4-5","claude-sonnet-4-5-20250929","claude-haiku-4-5","claude-haiku-4-5-20251001","claude-opus-4-1","claude-opus-4-1-20250805","claude-sonnet-4-20250514","claude-sonnet-4-0","claude-opus-4-20250514","claude-opus-4-0","claude-3-7-sonnet-latest","claude-3-7-sonnet-20250219","claude-3-5-haiku-20241022","claude-3-5-sonnet-20241022","claude-3-5-sonnet-20240620","claude-3-5-sonnet-latest","claude-3-opus-20240229","claude-3-sonnet-20240229","claude-3-haiku-20240307","claude-2.1","claude-2","claude-1.2","claude-1","claude-1-100k","claude-instant-1","claude-instant-1-100k"],Ue[S.openAI]=_(_([],an,!0),["chatgpt-4o-latest","gpt-4-vision-preview","gpt-3.5-turbo-instruct-0914","gpt-3.5-turbo-instruct","deepseek-ai/DeepSeek-V3.2-Exp"],!1),Ue[S.bedrock]=["anthropic.claude-sonnet-4-5-20250929-v1:0","anthropic.claude-haiku-4-5-20251001-v1:0","anthropic.claude-opus-4-1-20250805-v1:0","anthropic.claude-3-5-sonnet-20241022-v2:0","anthropic.claude-3-5-sonnet-20240620-v1:0","anthropic.claude-3-5-haiku-20241022-v1:0","anthropic.claude-3-haiku-20240307-v1:0","anthropic.claude-3-opus-20240229-v1:0","anthropic.claude-3-sonnet-20240229-v1:0","anthropic.claude-v2","anthropic.claude-v2:1","anthropic.claude-instant-v1","cohere.command-r-v1:0","cohere.command-r-plus-v1:0","meta.llama2-13b-chat-v1","meta.llama2-70b-chat-v1","meta.llama3-8b-instruct-v1:0","meta.llama3-70b-instruct-v1:0","meta.llama3-1-8b-instruct-v1:0","meta.llama3-1-70b-instruct-v1:0","meta.llama3-1-405b-instruct-v1:0","mistral.mistral-7b-instruct-v0:2","mistral.mixtral-8x7b-instruct-v0:1","mistral.mistral-large-2402-v1:0","mistral.mistral-large-2407-v1:0","mistral.mistral-small-2402-v1:0","ai21.jamba-instruct-v1:0","amazon.titan-text-lite-v1","amazon.titan-text-express-v1","amazon.titan-text-premier-v1:0"],Ue),sn=rn[S.openAI],ln=((je={initial:[]})[S.openAI]=sn,je[S.assistants]=sn.filter((function(e){return/gpt-4|gpt-3\\.5/i.test(e)&&!/vision|instruct/i.test(e)})),je[S.agents]=sn,je[S.gptPlugins]=sn,je[S.azureOpenAI]=sn,je[S.chatGPTBrowser]=["text-davinci-002-render-sha"],je[S.google]=rn[S.google],je[S.anthropic]=rn[S.anthropic],je[S.bedrock]=rn[S.bedrock],je);function cn(e,t){return g(this,void 0,void 0,(function(){return f(this,(function(n){switch(n.label){case 0:return[4,a.post(e,JSON.stringify(t),{headers:{"Content-Type":"application/json"}})];case 1:return[2,n.sent().data]}}))}))}(Ge={})[S.assistants]="".concat(We(),"/api/assistants/v2/chat"),Ge[S.azureAssistants]="".concat(We(),"/api/assistants/v1/chat"),Ge[S.agents]="".concat(We(),"/api/").concat(S.agents,"/chat"),new Set([S.gptPlugins,S.anthropic,S.google,S.openAI,S.azureOpenAI,S.custom,S.agents,S.bedrock]),(Fe={})[S.custom]=!0,Fe[S.openAI]=!0,Fe[S.anthropic]=!0,Fe[S.gptPlugins]=!0,Fe[S.assistants]=!0,Fe[S.agents]=!0,Fe[S.azureAssistants]=!0,Fe[S.azureOpenAI]=!0,Fe[S.bedrock]=!0,function(e){e.generative="generative",e.agents="agents"}(Kt||(Kt={})),function(e){e.PROMPT_GROUPS="promptGroups",e.SHARED_LINKS="sharedLinks"}(Wt||(Wt={})),function(e){e[e.ONE_DAY=864e5]="ONE_DAY",e[e.ONE_HOUR=36e5]="ONE_HOUR",e[e.THIRTY_MINUTES=18e5]="THIRTY_MINUTES",e[e.TEN_MINUTES=6e5]="TEN_MINUTES",e[e.FIVE_MINUTES=3e5]="FIVE_MINUTES",e[e.THREE_MINUTES=18e4]="THREE_MINUTES",e[e.TWO_MINUTES=12e4]="TWO_MINUTES",e[e.ONE_MINUTE=6e4]="ONE_MINUTE",e[e.THIRTY_SECONDS=3e4]="THIRTY_SECONDS"}(Bt||(Bt={})),function(e){e.CONFIG_STORE="CONFIG_STORE",e.ROLES="ROLES",e.PLUGINS="PLUGINS",e.GEN_TITLE="GEN_TITLE",e.TOOLS="TOOLS",e.MODELS_CONFIG="MODELS_CONFIG",e.MODEL_QUERIES="MODEL_QUERIES",e.STARTUP_CONFIG="STARTUP_CONFIG",e.ENDPOINT_CONFIG="ENDPOINT_CONFIG",e.TOKEN_CONFIG="TOKEN_CONFIG",e.APP_CONFIG="APP_CONFIG",e.ABORT_KEYS="ABORT_KEYS",e.BANS="BANS",e.ENCODED_DOMAINS="ENCODED_DOMAINS",e.AUDIO_RUNS="AUDIO_RUNS",e.MESSAGES="MESSAGES",e.FLOWS="FLOWS",e.PENDING_REQ="PENDING_REQ",e.S3_EXPIRY_INTERVAL="S3_EXPIRY_INTERVAL",e.OPENID_EXCHANGED_TOKENS="OPENID_EXCHANGED_TOKENS",e.OPENID_SESSION="OPENID_SESSION",e.SAML_SESSION="SAML_SESSION"}(Vt||(Vt={})),function(e){e.FILE_UPLOAD_LIMIT="file_upload_limit",e.ILLEGAL_MODEL_REQUEST="illegal_model_request",e.TOKEN_BALANCE="token_balance",e.BAN="ban",e.TTS_LIMIT="tts_limit",e.STT_LIMIT="stt_limit",e.RESET_PASSWORD_LIMIT="reset_password_limit",e.VERIFY_EMAIL_LIMIT="verify_email_limit",e.CONVO_ACCESS="convo_access",e.TOOL_CALL_LIMIT="tool_call_limit",e.GENERAL="general",e.LOGINS="logins",e.CONCURRENT="concurrent",e.NON_BROWSER="non_browser",e.MESSAGE_LIMIT="message_limit",e.REGISTRATIONS="registrations"}(Ht||(Ht={})),function(e){e.NO_USER_KEY="no_user_key",e.EXPIRED_USER_KEY="expired_user_key",e.INVALID_USER_KEY="invalid_user_key",e.NO_BASE_URL="no_base_url",e.MODERATION="moderation",e.INPUT_LENGTH="INPUT_LENGTH",e.INVALID_REQUEST="invalid_request_error",e.INVALID_ACTION="invalid_action_error",e.NO_SYSTEM_MESSAGES="no_system_messages",e.GOOGLE_ERROR="google_error",e.GOOGLE_TOOL_CONFLICT="google_tool_conflict",e.INVALID_AGENT_PROVIDER="invalid_agent_provider",e.MISSING_MODEL="missing_model",e.MODELS_NOT_LOADED="models_not_loaded",e.ENDPOINT_MODELS_NOT_LOADED="endpoint_models_not_loaded",e.AUTH_FAILED="auth_failed"}(qt||(qt={})),function(e){e.GOOGLE_SERVICE_KEY="GOOGLE_SERVICE_KEY",e.GOOGLE_API_KEY="GOOGLE_API_KEY"}(Qt||(Qt={})),function(e){e[e.LOW=85]="LOW",e[e.HIGH=170]="HIGH",e[e.ADDITIONAL=85]="ADDITIONAL"}(Yt||(Yt={})),function(e){e.GENERAL="general",e.CHAT="chat",e.SPEECH="speech",e.BETA="beta",e.DATA="data",e.BALANCE="balance",e.ACCOUNT="account",e.COMMANDS="commands",e.PERSONALIZATION="personalization"}(Xt||(Xt={})),function(e){e.OPENAI="openai",e.AZURE_OPENAI="azureOpenAI"}($t||($t={})),function(e){e.OPENAI="openai",e.AZURE_OPENAI="azureOpenAI",e.ELEVENLABS="elevenlabs",e.LOCALAI="localai"}(Jt||(Jt={})),function(e){e.VERSION="v0.8.1-rc1",e.CONFIG_VERSION="1.3.1",e.NO_PARENT="00000000-0000-0000-0000-000000000000",e.USE_PRELIM_RESPONSE_MESSAGE_ID="USE_PRELIM_RESPONSE_MESSAGE_ID",e.NEW_CONVO="new",e.PENDING_CONVO="PENDING",e.SEARCH="search",e[e.ENCODED_DOMAIN_LENGTH=10]="ENCODED_DOMAIN_LENGTH",e.CURRENT_MODEL="current_model",e.COMMON_DIVIDER="__",e[e.COMMANDS_MAX_LENGTH=56]="COMMANDS_MAX_LENGTH",e[e.DEFAULT_STREAM_RATE=1]="DEFAULT_STREAM_RATE",e.SAVED_TAG="Saved",e[e.MAX_CONVO_STARTERS=4]="MAX_CONVO_STARTERS",e.GLOBAL_PROJECT_NAME="instance",e.mcp_delimiter="_mcp_",e.mcp_prefix="mcp_",e.mcp_all="sys__all__sys",e.mcp_clear="sys__clear__sys",e.mcp_server="sys__server__sys",e.LC_TRANSFER_TO_="lc_transfer_to_",e.EPHEMERAL_AGENT_ID="ephemeral"}(Zt||(Zt={})),function(e){e.APP_TITLE="appTitle",e.LAST_CONVO_SETUP="lastConversationSetup",e.LAST_MODEL="lastSelectedModel",e.LAST_TOOLS="lastSelectedTools",e.LAST_SPEC="lastSelectedSpec",e.FILES_TO_DELETE="filesToDelete",e.ASST_ID_PREFIX="assistant_id__",e.AGENT_ID_PREFIX="agent_id__",e.FORK_SETTING="forkSetting",e.REMEMBER_FORK_OPTION="rememberDefaultFork",e.FORK_SPLIT_AT_TARGET="splitAtTarget",e.TEXT_DRAFT="textDraft_",e.FILES_DRAFT="filesDraft_",e.LAST_PROMPT_CATEGORY="lastPromptCategory",e.ENABLE_USER_MSG_MARKDOWN="enableUserMsgMarkdown",e.SHOW_ANALYSIS_CODE="showAnalysisCode",e.LAST_MCP_="LAST_MCP_",e.LAST_CODE_TOGGLE_="LAST_CODE_TOGGLE_",e.LAST_WEB_SEARCH_TOGGLE_="LAST_WEB_SEARCH_TOGGLE_",e.LAST_FILE_SEARCH_TOGGLE_="LAST_FILE_SEARCH_TOGGLE_",e.LAST_ARTIFACTS_TOGGLE_="LAST_ARTIFACTS_TOGGLE_",e.LAST_AGENT_PROVIDER="lastAgentProvider",e.LAST_AGENT_MODEL="lastAgentModel",e.PIN_MCP_="PIN_MCP_",e.PIN_WEB_SEARCH_="PIN_WEB_SEARCH_",e.PIN_CODE_INTERPRETER_="PIN_CODE_INTERPRETER_"}(en||(en={})),function(e){e.DIRECT_PATH="directPath",e.INCLUDE_BRANCHES="includeBranches",e.TARGET_LEVEL="targetLevel",e.DEFAULT="default"}(tn||(tn={})),function(e){e.API_URL="https://api.cohere.ai/v1",e.ROLE_USER="USER",e.ROLE_SYSTEM="SYSTEM",e.ROLE_CHATBOT="CHATBOT",e.TITLE_MESSAGE="TITLE:"}(nn||(nn={})),function(e){e.ALL="sys__all__sys",e.MY_PROMPTS="sys__my__prompts__sys",e.NO_CATEGORY="sys__no__category__sys",e.SHARED_PROMPTS="sys__shared__prompts__sys"}(on||(on={})),(ze={})[S.openAI]=S.openAI,ze[S.bedrock]=S.bedrock,ze[S.anthropic]=S.anthropic,ze[S.azureOpenAI]=S.azureOpenAI;var un=!1,pn=[],dn=function(e){return cn(function(e){return"".concat(Ce,"/api/auth/refresh").concat(!0===e?"?retry=true":"")}(e))},mn=function(e){!function(e){a.defaults.headers.common.Authorization="Bearer "+e}(e),window.dispatchEvent(new CustomEvent("tokenUpdated",{detail:e}))},gn=function(e,t){void 0===t&&(t=null),pn.forEach((function(n){e?n.reject(e):n.resolve(t)})),pn=[]};"undefined"!=typeof window&&a.interceptors.response.use((function(e){return e}),(function(e){return g(void 0,void 0,void 0,(function(){var t,n,o,i,r,s,l,c,u;return f(this,(function(p){switch(p.label){case 0:if(t=e.config,!e.response)return[2,Promise.reject(e)];if(!0===(null===(s=t.url)||void 0===s?void 0:s.includes("/api/auth/2fa")))return[2,Promise.reject(e)];if(!0===(null===(l=t.url)||void 0===l?void 0:l.includes("/api/auth/logout")))return[2,Promise.reject(e)];if(401!==e.response.status||t._retry)return[3,13];if(console.warn("401 error, refreshing token"),t._retry=!0,!un)return[3,5];p.label=1;case 1:return p.trys.push([1,4,,5]),[4,new Promise((function(e,t){pn.push({resolve:e,reject:t})}))];case 2:return i=p.sent(),t.headers.Authorization="Bearer "+i,[4,a(t)];case 3:return[2,p.sent()];case 4:return n=p.sent(),[2,Promise.reject(n)];case 5:un=!0,p.label=6;case 6:return p.trys.push([6,11,12,13]),[4,dn(!0===(null===(c=t.url)||void 0===c?void 0:c.includes("api/auth/refresh")))];case 7:return o=p.sent(),(i=null!==(u=null==o?void 0:o.token)&&void 0!==u?u:"")?(t.headers.Authorization="Bearer "+i,mn(i),gn(null,i),[4,a(t)]):[3,9];case 8:return[2,p.sent()];case 9:window.location.href.includes("share/")?console.log("Refresh token failed from shared link, attempting request to ".concat(t.url)):window.location.href="/login",p.label=10;case 10:return[3,13];case 11:return r=p.sent(),gn(r,null),[2,Promise.reject(r)];case 12:return un=!1,[7];case 13:return[2,Promise.reject(e)]}}))}))}));var fn={get:function(e,t){return g(this,void 0,void 0,(function(){return f(this,(function(n){switch(n.label){case 0:return[4,a.get(e,d({},t))];case 1:return[2,n.sent().data]}}))}))},getResponse:function(e,t){return g(this,void 0,void 0,(function(){return f(this,(function(n){switch(n.label){case 0:return[4,a.get(e,d({},t))];case 1:return[2,n.sent()]}}))}))},post:cn,postMultiPart:function(e,t,n){return g(this,void 0,void 0,(function(){return f(this,(function(o){switch(o.label){case 0:return[4,a.post(e,t,d(d({},n),{headers:{"Content-Type":"multipart/form-data"}}))];case 1:return[2,o.sent().data]}}))}))},postTTS:function(e,t,n){return g(this,void 0,void 0,(function(){return f(this,(function(o){switch(o.label){case 0:return[4,a.post(e,t,d(d({},n),{headers:{"Content-Type":"multipart/form-data"},responseType:"arraybuffer"}))];case 1:return[2,o.sent().data]}}))}))},put:function(e,t){return g(this,void 0,void 0,(function(){return f(this,(function(n){switch(n.label){case 0:return[4,a.put(e,JSON.stringify(t),{headers:{"Content-Type":"application/json"}})];case 1:return[2,n.sent().data]}}))}))},delete:function(e){return g(this,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return[4,a.delete(e)];case 1:return[2,t.sent().data]}}))}))},deleteWithOptions:function(e,t){return g(this,void 0,void 0,(function(){return f(this,(function(n){switch(n.label){case 0:return[4,a.delete(e,d({},t))];case 1:return[2,n.sent().data]}}))}))},patch:function(e,t){return g(this,void 0,void 0,(function(){return f(this,(function(n){switch(n.label){case 0:return[4,a.patch(e,JSON.stringify(t),{headers:{"Content-Type":"application/json"}})];case 1:return[2,n.sent().data]}}))}))},refreshToken:dn,dispatchTokenUpdatedEvent:mn};function _n(e){return fn.delete(function(e){return"".concat(qe,"/").concat(e)}(e))}function bn(){return fn.delete("".concat(qe,"?all=true"))}function vn(e){return fn.get(function(e){return"".concat(He,"/").concat(e)}(e))}function hn(e){return fn.get(function(e){return"".concat(He,"/link/").concat(e)}(e))}function En(e){if(!e.value)throw new Error("value is required");return fn.put(qe,e)}function Tn(e){return fn.post("".concat(Ce,"/api/presets"),e)}function An(e){return fn.post("".concat(Ce,"/api/presets/delete"),e)}var On=function(e){return fn.post("".concat(Ce,"/api/tokenizer"),{arg:e})},In=function(e){return fn.post("".concat(Ce,"/api/auth/register"),e)},yn=function(e){return fn.get(function(e){return"".concat(qe,"?name=").concat(e)}(e))},Sn=function(e){return fn.post("".concat(Ce,"/api/auth/requestPasswordReset"),e)},Rn=function(e){return fn.post("".concat(Ce,"/api/auth/resetPassword"),e)},xn=function(){return fn.get("".concat(Ce,"/api/plugins"))},Ln=function(e){return fn.post("".concat(Ce,"/api/user/plugins"),e)},Pn=function(e){return fn.post(function(e){return"".concat(Ce,"/api/mcp/").concat(e,"/reinitialize")}(e))},Nn=function(e){return fn.get(function(e){return"".concat(Ce,"/api/mcp/connection/status/").concat(e)}(e))};function Cn(e){return fn.post(function(e){return"".concat(Ce,"/api/mcp/oauth/cancel/").concat(e)}(e),{})}var wn,kn,Mn,Dn,Un,jn,Gn,Fn=function(){return fn.get("".concat(Ye(),"/config/get"))};function zn(){return fn.delete("".concat(Qe,"/all"))}function Kn(e){return fn.get(function(e){return"".concat(Qe,"/").concat(e)}(e))}function Wn(e,t,n){return fn.put(function(e,t){return"".concat(Ce,"/api/messages/").concat(e,"/").concat(t,"/feedback")}(e,t),n)}function Bn(e){return fn.get(function(e){var t=e.q,n=e.limit,o=e.types,a="".concat(Ce,"/api/permissions/search-principals?q=").concat(encodeURIComponent(t));return void 0!==n&&(a+="&limit=".concat(n)),o&&o.length>0&&(a+="&types=".concat(o.join(","))),a}(e))}function Vn(e){return fn.get(function(e){return"".concat(Ce,"/api/permissions/").concat(e,"/roles")}(e))}function Hn(e,t){return fn.get(function(e,t){return"".concat(Ce,"/api/permissions/").concat(e,"/").concat(t)}(e,t))}function qn(e,t,n){return fn.put(function(e,t){return"".concat(Ce,"/api/permissions/").concat(e,"/").concat(t)}(e,t),n)}function Qn(e,t){return fn.get(function(e,t){return"".concat(Ce,"/api/permissions/").concat(e,"/").concat(t,"/effective")}(e,t))}!function(e){e.messages="messages",e.sharedMessages="sharedMessages",e.sharedLinks="sharedLinks",e.allConversations="allConversations",e.archivedConversations="archivedConversations",e.searchConversations="searchConversations",e.conversation="conversation",e.searchEnabled="searchEnabled",e.user="user",e.name="name",e.models="models",e.balance="balance",e.endpoints="endpoints",e.presets="presets",e.searchResults="searchResults",e.tokenCount="tokenCount",e.availablePlugins="availablePlugins",e.startupConfig="startupConfig",e.assistants="assistants",e.assistant="assistant",e.agents="agents",e.agent="agent",e.files="files",e.fileConfig="fileConfig",e.tools="tools",e.toolAuth="toolAuth",e.toolCalls="toolCalls",e.mcpTools="mcpTools",e.mcpConnectionStatus="mcpConnectionStatus",e.mcpAuthValues="mcpAuthValues",e.agentTools="agentTools",e.actions="actions",e.assistantDocs="assistantDocs",e.agentDocs="agentDocs",e.fileDownload="fileDownload",e.voices="voices",e.customConfigSpeech="customConfigSpeech",e.prompts="prompts",e.prompt="prompt",e.promptGroups="promptGroups",e.allPromptGroups="allPromptGroups",e.promptGroup="promptGroup",e.categories="categories",e.randomPrompts="randomPrompts",e.agentCategories="agentCategories",e.marketplaceAgents="marketplaceAgents",e.roles="roles",e.conversationTags="conversationTags",e.health="health",e.userTerms="userTerms",e.banner="banner",e.memories="memories",e.principalSearch="principalSearch",e.accessRoles="accessRoles",e.resourcePermissions="resourcePermissions",e.effectivePermissions="effectivePermissions",e.graphToken="graphToken"}(wn||(wn={})),function(e){e.fileUpload="fileUpload",e.fileDelete="fileDelete",e.updatePreset="updatePreset",e.deletePreset="deletePreset",e.loginUser="loginUser",e.logoutUser="logoutUser",e.refreshToken="refreshToken",e.avatarUpload="avatarUpload",e.speechToText="speechToText",e.textToSpeech="textToSpeech",e.assistantAvatarUpload="assistantAvatarUpload",e.agentAvatarUpload="agentAvatarUpload",e.updateAction="updateAction",e.updateAgentAction="updateAgentAction",e.deleteAction="deleteAction",e.deleteAgentAction="deleteAgentAction",e.revertAgentVersion="revertAgentVersion",e.deleteUser="deleteUser",e.updateRole="updateRole",e.enableTwoFactor="enableTwoFactor",e.verifyTwoFactor="verifyTwoFactor",e.updateMemoryPreferences="updateMemoryPreferences"}(kn||(kn={})),function(e){e.USER="user",e.GROUP="group",e.PUBLIC="public",e.ROLE="role"}(Mn||(Mn={})),function(e){e.USER="User",e.GROUP="Group",e.ROLE="Role"}(Dn||(Dn={})),function(e){e.AGENT="agent",e.PROMPTGROUP="promptGroup"}(Un||(Un={})),function(e){e[e.VIEW=1]="VIEW",e[e.EDIT=2]="EDIT",e[e.DELETE=4]="DELETE",e[e.SHARE=8]="SHARE"}(jn||(jn={})),function(e){e.AGENT_VIEWER="agent_viewer",e.AGENT_EDITOR="agent_editor",e.AGENT_OWNER="agent_owner",e.PROMPTGROUP_VIEWER="promptGroup_viewer",e.PROMPTGROUP_EDITOR="promptGroup_editor",e.PROMPTGROUP_OWNER="promptGroup_owner"}(Gn||(Gn={}));var Yn=o.object({type:o.nativeEnum(Mn),id:o.string().optional(),name:o.string().optional(),email:o.string().optional(),source:o.enum(["local","entra"]).optional(),avatar:o.string().optional(),description:o.string().optional(),idOnTheSource:o.string().optional(),accessRoleId:o.nativeEnum(Gn).optional(),memberCount:o.number().optional()}),Xn=o.object({accessRoleId:o.nativeEnum(Gn),name:o.string(),description:o.string().optional(),resourceType:o.nativeEnum(Un).default(Un.AGENT),permBits:o.number()}),$n=o.object({id:o.string(),principalType:o.nativeEnum(Mn),principalId:o.string().optional(),principalName:o.string().optional(),role:Xn,grantedBy:o.string(),grantedAt:o.string(),inheritedFrom:o.string().optional(),source:o.enum(["local","entra"]).optional()});function Jn(e,t){return(e&t)===t}o.object({resourceType:o.nativeEnum(Un),resourceId:o.string(),permissions:o.array($n)}),o.object({updated:Yn.array(),removed:Yn.array(),public:o.boolean(),publicAccessRoleId:o.string().optional()}),o.object({message:o.string(),results:o.object({principals:Yn.array(),public:o.boolean(),publicAccessRoleId:o.string().optional()})}),o.object({resourceType:o.nativeEnum(Un),resourceId:o.nativeEnum(Gn),principals:o.array(Yn),public:o.boolean(),publicAccessRoleId:o.nativeEnum(Gn).optional()}),o.object({permissionBits:o.number()});var Zn=function(t,n){return e([wn.sharedMessages,t],(function(){return vn(t)}),d({refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1},n))},eo=function(n,o){var a=t();return e([wn.sharedLinks,n],(function(){return hn(n)}),d({enabled:!!n&&n!==Zt.NEW_CONVO&&n!==Zt.PENDING_CONVO,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,onSuccess:function(e){a.setQueryData([wn.sharedLinks,n],{conversationId:e.conversationId,shareId:e.shareId})}},o))},to=function(t,n){return e([wn.conversation,t],(function(){return Kn(t)}),d({refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1},n))},no=function(e){var o=t();return n((function(){return Kn(e)}),{onSuccess:function(){o.invalidateQueries([wn.conversation,e])}})},oo=function(e){var o=t();return n((function(e){return function(e){var t=e.conversationId,n=e.messageId,o=e.text;if(!t)throw new Error("conversationId is required");return fn.put(Ve({conversationId:t,messageId:n}),{text:o})}(e)}),{onSuccess:function(){o.invalidateQueries([wn.messages,e])}})},ao=function(e){var o=t();return n((function(e){return function(e){var t=e.conversationId,n=e.messageId,o=e.index,a=e.text;if(!t)throw new Error("conversationId is required");return fn.put(Ve({conversationId:t,messageId:n}),{text:a,index:o})}(e)}),{onSuccess:function(){o.invalidateQueries([wn.messages,e])}})},io=function(){var e=t();return n((function(e){return En(e)}),{onSuccess:function(t,n){e.invalidateQueries([wn.name,n.name])}})},ro=function(){var e=t();return n((function(){return zn()}),{onSuccess:function(){e.invalidateQueries([wn.allConversations])}})},so=function(e){var o=t();return n((function(){return _n(e)}),{onSuccess:function(){var t,n;o.invalidateQueries([wn.name,e]),(n=null!=(t=e)?t:"")&&n.toLowerCase().endsWith(S.assistants)&&(o.invalidateQueries([wn.assistants,e,v]),o.invalidateQueries([wn.assistantDocs]),o.invalidateQueries([wn.assistants]),o.invalidateQueries([wn.assistant]),o.invalidateQueries([wn.mcpTools]),o.invalidateQueries([wn.actions]),o.invalidateQueries([wn.tools]))}})},lo=function(){var e=t();return n((function(){return bn()}),{onSuccess:function(){e.invalidateQueries([wn.name]),e.invalidateQueries([wn.assistants,S.assistants,v]),e.invalidateQueries([wn.assistants,S.azureAssistants,v]),e.invalidateQueries([wn.assistantDocs]),e.invalidateQueries([wn.assistants]),e.invalidateQueries([wn.assistant]),e.invalidateQueries([wn.mcpTools]),e.invalidateQueries([wn.actions]),e.invalidateQueries([wn.tools])}})},co=function(t){return e([wn.models],(function(){return g(void 0,void 0,void 0,(function(){return f(this,(function(e){return[2,fn.get("".concat(Ce,"/api/models"))]}))}))}),d({initialData:ln,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,staleTime:1/0},t))},uo=function(){var e=t();return n((function(e){return Tn(e)}),{onSuccess:function(){e.invalidateQueries([wn.presets])}})},po=function(){var e=t();return n((function(e){return An(e)}),{onSuccess:function(){e.invalidateQueries([wn.presets])}})},mo=function(){var e=t();return n((function(e){var t=e.text;return On(t)}),{onSuccess:function(){e.invalidateQueries([wn.tokenCount])}})},go=function(e){var o=t();return n((function(e){return In(e)}),d(d({},e),{onSuccess:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];o.invalidateQueries([wn.user]),(null==e?void 0:e.onSuccess)&&e.onSuccess.apply(e,t)}}))},fo=function(t,n){return e([wn.name,t],(function(){return t?yn(t):Promise.resolve({expiresAt:""})}),d({refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,retry:!1},n))},_o=function(){return n((function(e){return Sn(e)}))},bo=function(){return n((function(e){return Rn(e)}))},vo=function(t){return e([wn.availablePlugins],(function(){return xn()}),d({refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1},t))},ho=function(e){var o=t(),a=null!=e?e:{},i=a.onSuccess,r=m(a,["onSuccess"]);return n((function(e){return Ln(e)}),d(d({},r),{onSuccess:function(){for(var e,t,n,a,r,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];if(o.invalidateQueries([wn.user]),null==i||i.apply(void 0,s),"uninstall"===(null===(e=s[1])||void 0===e?void 0:e.action)&&(null===(n=null===(t=s[1])||void 0===t?void 0:t.pluginKey)||void 0===n?void 0:n.startsWith(Zt.mcp_prefix))){var c=null===(r=null===(a=s[1])||void 0===a?void 0:a.pluginKey)||void 0===r?void 0:r.substring(Zt.mcp_prefix.length);o.invalidateQueries([wn.mcpAuthValues,c])}}}))},Eo=function(){var e=t();return n((function(e){return Pn(e)}),{onSuccess:function(){e.invalidateQueries([wn.mcpTools])}})},To=function(){var e=t();return n((function(e){return Cn(e)}),{onSuccess:function(){e.invalidateQueries([wn.mcpConnectionStatus])}})},Ao=function(t){return e([wn.customConfigSpeech],(function(){return Fn()}),d({refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1},t))},Oo=function(e,o){var a=t();return n((function(t){return Wn(e,o,t)}),{onSuccess:function(){a.invalidateQueries([wn.messages,o])}})},Io=function(t,n){return e([wn.principalSearch,t],(function(){return Bn(t)}),d({enabled:!!t.q&&t.q.length>=2,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,staleTime:3e4},n))},yo=function(t,n){return e([wn.accessRoles,t],(function(){return Vn(t)}),d({enabled:!!t,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,staleTime:3e5},n))},So=function(t,n,o){return e([wn.resourcePermissions,t,n],(function(){return Hn(t,n)}),d({enabled:!!t&&!!n,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,staleTime:12e4},o))},Ro=function(){var e=t();return n({mutationFn:function(e){return qn(e.resourceType,e.resourceId,e.data)},onSuccess:function(t,n){e.invalidateQueries({queryKey:[wn.accessRoles,n.resourceType]}),e.invalidateQueries({queryKey:[wn.resourcePermissions,n.resourceType,n.resourceId]}),e.invalidateQueries({queryKey:[wn.effectivePermissions,n.resourceType,n.resourceId]})}})},xo=function(t,n,o){return e(d({queryKey:[wn.effectivePermissions,t,n],queryFn:function(){return Qn(t,n)},enabled:!!t&&!!n,refetchOnWindowFocus:!1,staleTime:3e4},o))},Lo=function(t,n){return e([wn.mcpConnectionStatus,t],(function(){return Nn(t)}),d({refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,staleTime:1e4,enabled:!!t},n))};export{Jn as hasPermissions,vo as useAvailablePluginsQuery,To as useCancelMCPOAuthMutation,ro as useClearConversationsMutation,uo as useCreatePresetMutation,po as useDeletePresetMutation,yo as useGetAccessRolesQuery,no as useGetConversationByIdMutation,to as useGetConversationByIdQuery,Ao as useGetCustomConfigSpeechQuery,xo as useGetEffectivePermissionsQuery,co as useGetModelsQuery,So as useGetResourcePermissionsQuery,eo as useGetSharedLinkQuery,Zn as useGetSharedMessages,Lo as useMCPServerConnectionStatusQuery,go as useRegisterUserMutation,Eo as useReinitializeMCPServerMutation,_o as useRequestPasswordResetMutation,bo as useResetPasswordMutation,lo as useRevokeAllUserKeysMutation,so as useRevokeUserKeyMutation,Io as useSearchPrincipalsQuery,Oo as useUpdateFeedbackMutation,ao as useUpdateMessageContentMutation,oo as useUpdateMessageMutation,Ro as useUpdateResourcePermissionsMutation,mo as useUpdateTokenCountMutation,io as useUpdateUserKeysMutation,ho as useUpdateUserPluginsMutation,fo as useUserKeyQuery};
//# sourceMappingURL=index.es.js.map
